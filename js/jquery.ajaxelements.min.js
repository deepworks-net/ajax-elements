!function(h){h.plugin("ElementX",{defaults:{e:void 0,preventDefault:!1},framework:{_execute:function(t){},_run:function(t){this._execute(t)},_onEvent:function(t){this.preventDefault&&t.preventDefault(),this._run()}},methods:{fire:function(t){this.config._run.apply(this.config,arguments)}},builder:{metadataFn:function(){return{e:this.$elem.attr("data-event"),preventDefault:h.toBoolUn(this.$elem.attr("data-prevent-default"))}},initFn:function(){if(this.config.elem=this.elem,this.config.$elem=this.$elem,this.config.e){var e=this;this.$elem.on(this.config.e,function(t){e.config._onEvent(t)})}return this}}}),h.plugin("TriggerElement",{defaults:{autoTrigger:!0,triggerOnce:!1,target:void 0,triggerEvent:void 0,triggerFunc:function(){}},framework:{_triggered:!1,_execute:function(t){this._triggered&&this.triggerOnce||(this._trigger(t),this._triggered=!0)},_trigger:function(t){this.autoTrigger&&this.target&&this.triggerEvent&&h(this.target).trigger(this.triggerEvent),this.triggerFunc()}},builder:{metadataFn:function(){return{autoTrigger:h.toBoolUn(this.$elem.attr("data-auto-trigger")),triggerOnce:h.toBoolUn(this.$elem.attr("data-trigger-once")),target:this.$elem.attr("data-target"),triggerEvent:this.$elem.attr("data-trigger-event")}}}},"ElementX"),h.plugin("TriggerButton",{defaults:{e:"click"}},"TriggerElement"),h.plugin("AjaxElement",{defaults:{ajaxcall:void 0,rid:void 0,useReplace:!1,eventStart:"ajaxStart.AE",eventStop:"ajaxStop.AE",triggerEvents:!0,preventDefault:!1,blockID:void 0,successFunc:function(t){},errorFunc:function(t){alert("There was an Error processing your request, please try again later.")},unAuthFunc:function(t){alert("There was an Error processing your request, please try again later. UNAUTHORIZED")},blockFunc:function(){},unblockFunc:function(){},beginFunc:function(t,e){},endFunc:function(t,e){},preStartFunc:function(){},alwaysFunc:function(){},replaceFunc:function(t,e){this.$rid&&(this.useReplace?(this.$rid.empty(),this.$rid.append(h.trim(t))):this.$rid.html(h.trim(t)))},doneCallbacks:[],alwaysCallbacks:[],failCallbacks:[]},framework:{_buildEvent:function(){this.triggerEvents&&this.$elem.trigger(this.eventStart,[this])},_ajaxFunc:function(t){return this._buildEvent(),h.ajax(h.extend(!0,{},this.ajaxcall,t))},_execute:function(t,e,a,n){var i=this;this.blockFunc(),this.preStartFunc(),this._ajaxFunc(t).done(function(t,e,a){i.beginFunc(t,a),i.replaceFunc(t,a),i.endFunc(t,a),i.successFunc(a)},this.doneCallbacks,e).fail(function(t){401===t.status?i.unAuthFunc(t):i.errorFunc(t)},this.failCallbacks,a).always(function(){i.triggerEvents&&i.$elem.trigger(i.eventStop),i.alwaysFunc(),i.unblockFunc()},this.alwaysCallbacks,n)}},builder:{metadataFn:function(){var t=this.$elem,e=t.attr("data-url"),a=h.extend({},t.attr("data-ajaxelement"),{rid:t.attr("data-rid"),eventStart:t.attr("data-event-start"),eventStop:t.attr("data-event-stop"),eventSpace:t.attr("data-event-space"),triggerEvents:h.toBoolUn(t.attr("data-trigger-events")),useReplace:h.toBoolUn(t.attr("data-replace")),blockID:t.attr("data-blockID")});return a.ajaxcall=h.extend(!0,{},t.data("ajaxcall"),{url:e}),a.ajaxcall.data=h.extend(!0,{},t.data("ajaxdata"),h.parseParams(e)),a},initFn:function(){return this.config.rid&&(this.config.$rid=h("#"===this.config.rid.slice(0,1)?this.config.rid:"#"+this.config.rid)),this}}},"ElementX"),h.plugin("AjaxButton",{defaults:{e:"click"}},"AjaxElement"),h.plugin("AjaxSelect",{defaults:{e:"change"},framework:{_run:function(t,e,a,n){var i={};i[h.extend({},{name:this.$elem.attr("name")},{name:this.$elem.attr("data-sendname")}).name]=this.elem.value,this.ajaxcall.data=h.extend({},this.ajaxcall.data,i),this._execute(t,e,a,n)}}},"AjaxElement"),h.plugin("AjaxForm",{defaults:{e:"submit",useNew:!1,validate:!1,catchEnter:!0,preventDefault:!0,frmdataFunc:function(){var t;if(this.useNew){var e=this.$elem.serializeObject();t=h.extend(!0,{},this.ajaxcall.data,e)}else t=this.$elem.serialize();this.ajaxcall.data=t},validateFunc:function(){return!0}},framework:{_unsaved:!1,_isUnSaved:function(t){if(void 0===t)return this._unsaved;this._unsaved=t},_run:function(t,e,a,n){var i=this;this.frmdataFunc(),this._validate()&&this._execute(t,[function(t,e,a){i._unsaved=!1},e],a,n)},_validate:function(){return!this.validate||this.validateFunc()}},methods:{unSaved:function(t){return this.config._isUnSaved.apply(this.config,arguments)}},builder:{metadataFn:function(){return{validate:h.toBoolUn(this.$elem.attr("data-validate")),catchEnter:h.toBoolUn(this.$elem.attr("data-catch-enter")),ajaxcall:{type:this.$elem.attr("method"),url:this.$elem.attr("action")}}},initFn:function(){function t(t){e.config._isUnSaved(!0)}var e=this;return this.$elem.on("change.ae.af",":input",t).on("input.ae.af",":input",t).on("keyup.ae.af",":input",t),this},destFn:function(){this.$elem.off("change.ae.af")}}},"AjaxElement"),h.plugin("AjaxTab",{defaults:{e:"click",loadOnce:!1,loaded:0},framework:{_run:function(t,e,a,n){0===this.loaded&&(this._execute(t,e,a,n),this.loadOnce&&(this.loaded=1))}},builder:{metadataFn:function(){return{loadOnce:h.toBoolUn(this.$elem.attr("data-load-once"))}}}},"AjaxElement"),h.plugin("AjaxAdvancedForm",{defaults:{data:null,loadCallback:function(t){},frmdataFunc:function(){this.ajaxcall.data=!0===this.useNew?this.$elem.serializeObject():this.$elem.serialize()},inputData:{select:{set:function(t){h(this).val(t)},init:function(){},get:function(){return h(this).val()}},text:{set:function(t){h(this).val(t)},init:function(){},get:function(){return h(this).val()}},input:{set:function(t){h(this).text(t)},init:function(){},get:function(){return h(this).text()}}}},framework:{_load:function(t,e){var r=t.data?t.data:t;h.each(this._model,function(t,e){for(var a=t.split("."),n=r[a[0]],i=1;i<a.length;i++)n=n[a[i]];void 0!==n&&e.set.apply(e.dom,[n])}),e&&this._reScan(),this.loadCallback(r)},_reset:function(){var i={},r=this._model,l=function(t,e,a){var n=e.split("."),i=n[0];return t[i]=a,1!==n.length&&(t[i]=l({},e.substr(e.indexOf(".")+1),a)),t};h.each(this._map,function(t,e){var a=e.split(".")[0],n=l({},e,r[e].value);i[a]=n[a]}),this._load(i),this._unsaved=!1},_reScan:function(){this._obj=this.$elem.serializeObject();var t=this.$elem.find("[data-input-map]"),o=this,u={},d={};h.each(t,function(t,e){var a=h(e),n=a.attr("data-input-map"),i=a.attr("data-input-type"),r=!0===h.toBoolUn(a.attr("data-input"));void 0===i&&r&&(i="input");var l=a.attr("name"),c="select"===i?o.inputData.select.set:o.inputData.text.set;o.inputData[i]&&o.inputData[i].set&&(c=o.inputData[i].set),d[l]=n;var s=o.inputData[i]&&void 0!==o.inputData[i].get?o.inputData[i].get.apply(e):a.val();u[n]={map_id:n,type:i,dom:e,name:l,value:s,set:c}}),this._model=u,this._map=d},_map:{},_obj:{},_model:{}},methods:{load:function(t,e){return this.config._load.apply(this.config,arguments),this.$elem},reset:function(){return this.config._reset.apply(this.config,arguments),this.$elem},scan:function(){return this.config._reScan.apply(this.config,arguments),this.$elem},get:function(){return this.config._model}},builder:{initFn:function(){return this.config.$elem=this.$elem,this.config._reScan.apply(this.config),this.config.data&&this.config._load.apply(this.config,[this.config,!0]),this},metadataFn:function(){return{load_url:this.$elem.attr("data-url")}}}},"AjaxForm"),h.plugin("TemplateTable",{defaults:{data:null,key:"sku",dTemplate:null,eTemplate:null,aTemplate:null,container:"body",handles:{addHandle:".add-button",editHandle:"tr .edit-button",cancelHandle:".cancel-button",cAddRowHandle:"tr.add .cancel-button",cEditRowHandle:"tr.edit .cancel-button"},removeRowFunc:function(){},templateFunc:function(t,e){return""},addAddRowCallback:function(){},addEditRowCallback:function(t,e){},addDefRowCallback:function(t,e){},drawCallback:function(){},getNewObject:function(){return{}},getRowId:function(t){return h(t).attr("id")},findCompareFunc:function(t,e){return t===e},sortCompareFunc:null},framework:{_rows:null,_newCount:1,_clearTable:function(){this.table.find("tbody").empty()},_drawTable:function(t){var n=this;this._clearTable(),h.each(this._rows,function(t,e){var a=n.templateFunc(e,n.dTemplate);n.table.append(a),n.addDefRowCallback(a,e)}),this.drawCallback(),this.table.trigger("draw.tt",[this])},_setData:function(t,e){this._rows=t,!1!==e&&this._drawTable()},_find:function(e){var a=this;return this._rows.find(function(t){return a.findCompareFunc(t,e)})},_findIndex:function(e){var a=this;return this._rows.findIndex(function(t){return a.findCompareFunc(t,e)})},_append:function(t,e){var a=this.templateFunc(t,e);return this.table.append(a),a},_resetTable:function(){this._clearTable(),this._drawTable(),this.table.trigger("reset.tt",[this])},_getRows:function(){return this._rows},_sort:function(){this._rows.sort(this.sortCompareFunc)},_handleReplaceData:function(t){var e=this._findIndex(t[this.key]);-1!==e?this._rows[e]=t:this._rows.push(t),this._sort()},_updateData:function(t,e){var a=this;h.each(t,function(t,e){a._handleReplaceData(e)}),!1!==e&&this._drawTable()}},methods:{load:function(){return this.config._drawTable.apply(this.config,arguments),this.$elem},data:function(t,e){return this.config._setData.apply(this.config,arguments),this.$elem},reset:function(){return this.config._resetTable.apply(this.config,arguments),this.$elem},rows:function(){return this.config._getRows.apply(this.config,arguments)},update:function(t,e){return this.config._updateData.apply(this.config,arguments),this.$elem},find:function(t){return this.config._find.apply(this.config,arguments)}},builder:{metadataFn:function(){return{container:this.$elem.attr("data-container"),dTemplate:this.$elem.attr("data-default-template"),eTemplate:this.$elem.attr("data-edit-template"),aTemplate:this.$elem.attr("data-add-template"),handles:{addHandle:this.$elem.attr("data-add-handle"),editHandle:this.$elem.attr("data-edit-handle"),cancelHandle:this.$elem.attr("data-cancel-handle"),cAddRowHandle:this.$elem.attr("data-add-row-handle"),cEditRowHandle:this.$elem.attr("data-edit-row-handle")}}},initFn:function(){var i=this.config;i.table=this.$elem,i._rows=this.config.data||[];var t=h(i.container);return t.off(".tt"),i.handles.addHandle&&t.on("click.tt",i.handles.addHandle,function(t){t.preventDefault();var e=i._append(i.getNewObject(),i.aTemplate);i.addAddRowCallback(h(e)),i.drawCallback(),i._newCount++}),i.handles.cAddRowHandle&&t.on("click.tt",i.handles.cAddRowHandle,function(t){t.preventDefault(),h(this).closest("tr").remove(),i.drawCallback()}),i.handles.cEditRowHandle&&t.on("click.tt",i.handles.cEditRowHandle,function(t){t.preventDefault();var e=h(this).closest("tr"),a=i._find(i.getRowId(e)),n=i.templateFunc(a,i.dTemplate);e.replaceWith(n),i.addDefRowCallback(h(n),a),i.drawCallback()}),i.handles.editHandle&&t.on("click.tt",i.handles.editHandle,function(t){t.preventDefault();var e=h(this).closest("tr"),a=i._find(i.getRowId(e)),n=i.templateFunc(a,i.eTemplate);e.replaceWith(n),i.addEditRowCallback(h(n),a),i.drawCallback()}),i._drawTable(),this}}})}(jQuery);